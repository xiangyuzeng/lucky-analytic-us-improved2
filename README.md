# Luckin Coffee 美国市场运营分析系统

## 🎯 更新说明 (Update Notes)

本次更新基于您提供的参考仪表板进行了全面改进，主要包括以下几个方面：

### ✅ 1. 完全中文本土化
- 🌏 **界面语言**: 所有标题、标签、指标名称均改为中文
- 📊 **数据标签**: 图表和表格完全中文化
- 💬 **用户提示**: 错误信息和帮助文本中文化
- 🎨 **文化适配**: 符合中国用户习惯的界面设计

### ✅ 2. 优化分析指标
根据您上传的PDF参考文档，精简了分析维度，保留最核心的业务指标：
- **总记录数** (Total Records): 1899
- **完成订单** (Completed Orders): 1474  
- **总收入** (Total Revenue): $28,157.71
- **取消率** (Cancel Rate): 0.6%

### ✅ 3. 修复导出功能
- 📊 **Excel导出**: 完整的多工作表Excel报告，包含汇总、平台分析、门店分析等
- 📄 **HTML报告**: 格式化的HTML报告，适合打印和分享
- 💾 **CSV数据**: UTF-8编码的原始数据导出
- 🔗 **分享链接**: 便于团队协作

### ✅ 4. 改进图表和洞察
保留有业务意义的可视化，移除冗余图表：
- 📈 **趋势分析**: 各平台每日订单趋势对比
- 🥧 **市场份额**: 三大平台占比分析
- 🏪 **门店表现**: 各门店收入排名
- 📋 **平台详情**: 核心运营指标汇总表
- 💡 **运营建议**: 基于数据的实用建议

## 🚀 快速开始

### 安装依赖
```bash
pip install -r requirements.txt
```

### 运行应用
```bash
streamlit run app.py
```

### 使用步骤
1. 🗂️ **上传数据**: 在左侧边栏上传各平台CSV文件
2. 📊 **查看仪表板**: 系统自动生成分析报告
3. 💾 **导出报告**: 选择合适的格式下载分析结果

## 📁 文件结构

```
├── app.py                  # 主应用程序
├── requirements.txt        # 依赖包列表
├── README.md              # 说明文档
└── data/                  # 数据文件夹
    ├── Uber.csv           # Uber Eats数据
    ├── doordash.csv       # DoorDash数据  
    └── grubhub.csv        # Grubhub数据
```

## 🎨 主要功能

### 📊 数据可视化
- **每日趋势图**: 展示各平台订单量变化趋势
- **市场份额饼图**: 三大平台的市场占比
- **门店收入排名**: 横向条形图显示各门店表现
- **平台对比表**: 详细的平台运营数据

### 🔍 智能分析
- **自动数据清洗**: 处理各种数据格式和异常值
- **时间序列分析**: 识别业务趋势和季节性模式  
- **异常检测**: 标识取消率等关键指标的异常
- **预测建议**: 基于历史数据的运营优化建议

### 📈 关键指标
- **总记录数**: 所有平台订单总量
- **完成订单**: 成功交付的订单数
- **总收入**: 完成订单的总收入金额
- **取消率**: 订单取消率（目标<5%）
- **客单价**: 平均订单价值
- **市场份额**: 各平台占比

### 💾 导出选项
- **Excel报告**: 包含多个工作表的完整分析报告
- **HTML报告**: 格式化的网页报告
- **CSV数据**: 原始数据下载
- **分享功能**: 生成分享链接

## 🔧 技术特性

### 数据处理
- **多格式支持**: 自动识别不同平台的CSV格式
- **日期处理**: 智能解析各种日期时间格式
- **货币清洗**: 自动处理美元符号和千分位格式
- **异常处理**: 容错的数据解析和错误提示

### 性能优化
- **内存效率**: 优化的数据加载和处理流程
- **缓存机制**: Streamlit内置缓存提升响应速度
- **增量更新**: 支持数据的增量上传和分析

### 用户体验
- **响应式设计**: 适配不同屏幕尺寸
- **直观界面**: 清晰的布局和色彩设计
- **实时反馈**: 即时的数据处理状态提示
- **多语言支持**: 中英文混合界面

## 🛠️ 自定义配置

### 颜色主题
```python
colors = {
    'Uber Eats': '#00897B',    # 青绿色
    'DoorDash': '#FF6B35',     # 橙色  
    'Grubhub': '#F57C00'       # 深橙色
}
```

### 时间范围
默认分析2025年10月数据，可在代码中修改：
```python
df = df[(df['Date'] >= '2025-10-01') & (df['Date'] <= '2025-10-31')]
```

### 指标阈值
取消率警告阈值：
```python
cancel_rate_threshold = 5.0  # 5%
```

## 🔍 故障排除

### 常见问题
1. **文件上传失败**: 检查CSV文件格式和编码
2. **日期解析错误**: 确认日期列格式符合要求
3. **中文显示异常**: 检查系统字体支持

### 联系支持
如遇到技术问题，请提供：
- 错误截图
- 数据文件样本（脱敏）
- 系统环境信息

## 📄 许可证

本项目采用MIT许可证，详情请参见LICENSE文件。

---

**开发团队**: Luckin Coffee 数据团队  
**更新时间**: 2025年11月22日  
**版本**: v2.0
